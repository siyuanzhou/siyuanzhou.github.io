---
layout: post
title: "计网复习"
date: 2021-03-10 10:36
toc: true
comments: true
categories: 技术学习
tags:
	- 基础
	- 复习 
---

### 计网

#### 分层协议

![image-20210414111154114](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111343.png)

<!--more-->

![image-20210307223025471](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111344.png)

##### 一次网页访问

![image-20210307153953158](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111345.png)

#### HTTP

##### http请求和响应报文

![image-20210307223219011](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111346.png)

![image-20210307223241867](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111347.png)

![image-20210307223249141](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111348.png)

##### http请求方法

![image-20210307223624541](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111349.png)

![image-20210307223613666](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111350.png)

##### http 请求过程

![image-20210307224005898](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111351.png)

##### get与post

![image-20210307224203352](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111352.png)

![image-20210307224141797](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111353.png)

![image-20210307224235985](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111354.png)

##### http长连接

HTTP 协议的长连接和短连接，实质上是 TCP 协议的长连接和短连接。

无状态：HTTP 协议是无状态的，指的是协议对于事务处理没有记忆能力，服务器不知道客户端是什么状态。

![image-20210307223744070](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111355.png)

![image-20210307224611197](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111356.png)

##### http状态码

![image-20210307224335187](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111357.png)

![image-20210307224402115](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111358.png)

![image-20210307224420773](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111359.png)

![image-20210307224436398](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111400.png)

##### 转发与重定向

转发是服务器行为，重定向是客户端行为。

![image-20210329203213395](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111401.png)

##### http1.0,1.1,2.X

![image-20210307224656500](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111402.png)

![image-20210307224713263](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111403.png)

#### HTTPS=HTTP+ 加密 + 认证 + 完整性保护

![image-20210307231641138](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111404.png)

```
1. A 与 B 通过 TCP 建立链接，初始化 SSL 层。
2. 进行 SSL 握手，A 发送 https 请求，传送客户端 SSL 协议版本号、支持的加密算法、随机数等。
3. 服务器 B 把 CA 证书（包含 B 的公钥），把自己支持的加密算法、随机数等回传给A。
4. A 接收到 CA 证书，验证证书有效性。
5. 校验通过，客户端随机产生一个字符串作为与 B 通信的对称密钥，通过 CA 证书解出服务器 B 的公钥，对其加密，发送给服务器。
6. B 用私钥解开信息，得到随机的字符串（对称密钥），利用这个密钥作为之后的通信密钥。
7. 客户端向服务器发出信息，指明后面的数据使用该对称密钥进行加密，同时通知服务器 SSL 握手结束。
8. 服务器接收到信息，使用对称密钥通信，通知握手接收。
9. SSL 握手结束，使用对称密钥加密数据。
```

##### https与http区别

![image-20210307231552528](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111405.png)

##### 加密

![image-20210307231408268](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111406.png)

##### 认证

![image-20210307231433548](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111407.png)

#### TCP、UDP

##### TCP与UDP区别

![image-20210307224826315](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111408.png)

##### TCP头部

```
ACK ： TCP 协议规定，只有 ACK=1 时有效，也规定连接建立后所有发送的报文的ACK 必须为 1。
SYN(SYNchronization) ： 在连接建立时用来同步序号。当 SYN=1 而 ACK=0 时，表明这是一个连接请求报文。对方若同意建立连接，则在响应报文中使 SYN=1 和 ACK=1.因此, SYN 置 1 就表示这是一个连接请求或连接接受报文。
FIN （finis）即完，终结的意思， 用来释放一个连接。当 FIN = 1 时，表明此报文段的发送方的数据已经发送完毕，并要求释放连接
```

![image-20210307224740805](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111409.png)

![image-20210307232127447](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111410.png)

##### TCP 三次握手

![image-20210307224945140](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111411.png)

![image-20210307225054471](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111412.png)

##### TCP四次挥手

![image-20210307225333703](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111413.png)

#####  tcp 粘包问题 nagle 算法

![image-20210307225439361](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111414.png)

![image-20210307225456168](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111415.png)

#####  tcp 如何保证可靠性传输

![image-20210307225655607](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111416.png)

#####  TCP 流量控制 拥塞控制

![image-20210307225751924](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111417.png)

##### 慢开始与拥塞避免

发送方维持一个叫做口 拥塞窗口 cwnd （congestion window） ）的状态变量。拥塞窗口的大小取决于网络的拥塞程度，并且动态地在变化。发送方让自己的发送窗口等于拥塞窗口，另外考虑到接受方的接收能力，发送窗口可能小于拥塞窗口。

慢开始算法的思路就是，不要一开始就发送大量的数据，先探测一下网络的拥塞程度，也就是说由小到大逐渐增加拥塞窗口的大小。

![image-20210307230036650](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111418.png)

![image-20210307230134036](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111419.png)



##### 快速重传快速恢复

![image-20210307230435445](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111420.png)

##### 滑动窗口机制

![image-20210307230532476](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111421.png)

##### TCP状态转移

![image-20210307230601261](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111422.png)

##### TIME_WAIT 和 CLOSE_WAIT

![image-20210307230830662](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111423.png)

**当一个 tcp 监听了 80 端口后，Udp 还能否监听 80 端口**
答：由于 TCP/IP 传输层的两个协议 TCP 和 UDP 是完全独立的两个软件模块，因此各自的端口号也相互独立，如 TCP 有一个 255 号端口，UDP 也可以有一个 255 号端口，二者并不冲突。

#### IP

![image-20210307231023027](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111424.png)

![image-20210307231036546](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111425.png)

![image-20210307231047743](https://cdn.jsdelivr.net/gh/siyuanzhou/pic/img/20210414111426.png)







